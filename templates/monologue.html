{% extends 'base.html' %}
{% block content %}

<!--return render_template("monologue.html", mono_id=mono_id, name=name, play_title=play_title, act=act, scene=scene, description=description, text=text)-->

<!--Displays monologue information based on monologue id in database-->
<h1>Monologue: {{ mono_id }} </h1>
<ul>
    <li>Play: <b>{{ play_title }}</b></li>
    <li>Act: {{ act }}</li>
    <li>Scene: {{ scene }}</li>
    <li>Description: {{ description }} </li>
</ul>

<h3> {{ name }}: </h3>

<!--QUESTIONS-->
<!-- How do I pass/identify the index of the line? -->
<!--when you hover over div class, img icon appears-->
<!--when you click on img icon, text box appears -->


<!--Loops through the list 'text' and displays each element, which is a line of the monologue-->
{% for line in text %}
  <div class="line">{{ line|safe }}
      <img src="https://cdn4.iconfinder.com/data/icons/flat-icon-set/128/chat-icon.png" alt="comment-icon" width="20" height="20" id="{{ loop.index0 }}" class="text-bubble">
  </div>

  <div class="add-comment" id="add-{{ loop.index0 }}" style="display:none">
  <!--Comment icon-->
  <!-- comment form that sends text + monologue info to server.py when submitted -->
    <form action="/comments" method="POST">
      <label for="comment">How would you say this in 2015?:</label>
      <textarea name="comment-text"></textarea>
      <input type="hidden" name="mono_id" value="{{ mono_id }}">
      <input type="hidden" name="line_id" value="{{ loop.index0 }}">
      <input type="submit" value="translate"/>
  </form>
</div>
{% endfor %}

<!-- Fix me-->
<!--jQuery to show/hide comment box-->
  <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
  <script>
  // var target;
      var tlist = $(".text-bubble");
      for (var i = 0; i < tlist.length; i++){
         $(tlist[i]).on("click", function(){
            $("#add-"+ this.id ).toggle();
          });
        }
  </script>

{% endblock %}
